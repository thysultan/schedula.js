!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(global):"function"==typeof define&&define.amd?define(e(window)):window.schedula=e(window)}(function(e){function n(e){function n(e){var n;if(e){if(0===o)return;n=i.shift()}else{if(0===r)return;n=l.shift()}var t=n[0],a=n[1],c=n[2],u=0===c?null:n[3];switch(c){case 0:a.call(t);break;case 1:a.call(t,u[0]);break;case 2:a.call(t,u[0],u[1]);break;case 3:a.call(t,u[0],u[1],u[2]);break;case 4:a.call(t,u[0],u[1],u[2],u[3]);break;case 5:a.call(t,u[0],u[1],u[2],u[3],u[4]);break;case 6:a.call(t,u[0],u[1],u[2],u[3],u[4],u[5]);break;case 7:a.call(t,u[0],u[1],u[2],u[3],u[4],u[5],u[6]);break;case 8:a.call(t,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7])}e?o--:r--}function a(){var e=Date.now(),c=e-f;c>u?(f=e-c%u,0!==o?n(!0):0!==r&&n(!1)):0===o&&0===r||t(a)}function c(e,n,c,u,f){e?i[o++]=[n,c,u,f]:l[r++]=[n,c,u,f],t(a)}var i=[],l=[],o=0,r=0,u=1e3/(e||60),f=0;return Object.create(null,{flush:{value:n},push:{value:c},budget:{get:function(){return e},set:function(n){u=1e3/(e=n)}},work:{get:function(){return{high:i,low:l}}}})}var t,a=e.Promise,c=e.requestAnimationFrame,i=e.setImmediate;return t=void 0!==a?function(e){a.resolve().then(e)}:void 0!==c?function(e){c(e)}:void 0!==i?function(e){requestIdleCallback(e)}:function(e){setTimeout(e,0)},n});